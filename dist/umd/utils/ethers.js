var __awaiter=this&&this.__awaiter||function(n,e,o,t){return new(o||(o=Promise))(function(r,c){function i(n){try{s(t.next(n))}catch(n){c(n)}}function a(n){try{s(t.throw(n))}catch(n){c(n)}}function s(n){var e;n.done?r(n.value):(e=n.value,e instanceof o?e:new o(function(n){n(e)})).then(i,a)}s((t=t.apply(n,e||[])).next())})};!function(n){if("object"==typeof module&&"object"==typeof module.exports){var e=n(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports","./internals"],n)}(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.proxyWeb3Provider=e.proxyContract=void 0;const o=n("./internals");function t(n,e,{onTxRequested:o,onTxCancelled:t,onTxSent:r,onSignatureRequested:c,onSignatureCancelled:i,onSignatureReceived:a}){e=Object.assign({sendTransaction:(n,e,c)=>__awaiter(this,void 0,void 0,function*(){let i;o(c[0]);try{i=yield n.bind(e)(...c)}catch(n){throw t(c[0]),n}return r(i),i}),signMessage:(n,e,o)=>__awaiter(this,void 0,void 0,function*(){let t;c(o[0]);try{t=yield n.bind(e)(...o)}catch(n){throw i(o[0]),n}return a(t),t})},e);const s={};return new Proxy(n,{get:(o,t)=>{const r=e[t];return r?function(e,o){let t=s[e];return t||(t=new Proxy(n[e],o),s[e]=t),t}(t,{apply:r}):o[t]}})}function r(n,e){return t(n,{connectUnchecked:(n,o,r)=>{return function(n,e){return t(n,{},e)}(n.bind(o)(...r),e)}},e)}e.proxyContract=function(n,e,t){const r=t?Object.assign({onContractTxRequested:o.noop,onContractTxCancelled:o.noop,onContractTxSent:o.noop},t):{onContractTxRequested:o.noop,onContractTxCancelled:o.noop,onContractTxSent:o.noop},{onContractTxRequested:c,onContractTxCancelled:i,onContractTxSent:a}=r,s={},u=n.interface.functions,d={};for(const n of Object.keys(u))d[u[n].name]=n;const f={};for(const e of Object.keys(n))f[e]=n[e];f.functions={};for(const e of Object.keys(n.functions))f.functions[e]=n.functions[e];function l(o,t){let r=s[t];if(!r){let u=n.interface.functions[t];u||(u=n.interface.functions[d[t]]),r=new Proxy(o[t],{apply:(n,r,s)=>__awaiter(this,void 0,void 0,function*(){const r=s.length;let d,f,l;r===u.inputs.length+1&&"object"==typeof s[r-1]&&(d=s[r]),d&&(f=d.outcome,delete d.outcome),c({name:e,method:t,overrides:d,outcome:f});try{l=yield n.bind(o)(...s)}catch(n){throw i({name:e,method:t,overrides:d,outcome:f}),n}return a({hash:l.hash,name:e,method:t,overrides:d,outcome:f}),l})}),s[t]=r}return r}const p=new Proxy(f.functions,{get:(e,o)=>l(n.functions,o)});return new Proxy(f,{get:(e,o)=>"functions"===o?p:n.functions[o]?l(n.functions,o):"_proxiedContract"===o?n:"toJSON"===o?()=>({address:e.address,abi:e.abi}):e[o]})},e.proxyWeb3Provider=function(n,e){const t=e?Object.assign({onTxRequested:o.noop,onTxCancelled:o.noop,onTxSent:o.noop,onSignatureRequested:o.noop,onSignatureCancelled:o.noop,onSignatureReceived:o.noop},e):{onTxRequested:o.noop,onTxCancelled:o.noop,onTxSent:o.noop,onSignatureRequested:o.noop,onSignatureCancelled:o.noop,onSignatureReceived:o.noop},c=new Proxy(n.getSigner,{apply:(e,o,c)=>r(e.bind(n)(...c),t)});return new Proxy(n,{get:(n,e)=>"getSigner"===e?c:"signMessage"===e?c:"sendTransaction"===e?c:"connectUnchecked"===e?c:n[e]})}});