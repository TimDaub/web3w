var __awaiter=this&&this.__awaiter||function(n,e,t,o){return new(t||(t=Promise))(function(r,c){function i(n){try{s(o.next(n))}catch(n){c(n)}}function a(n){try{s(o.throw(n))}catch(n){c(n)}}function s(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(i,a)}s((o=o.apply(n,e||[])).next())})};!function(n){if("object"==typeof module&&"object"==typeof module.exports){var e=n(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports","./internals"],n)}(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.proxyWeb3Provider=e.proxyContract=void 0;const t=n("./internals");function o(n,e,{onTxRequested:t,onTxCancelled:o,onTxSent:r,onSignatureRequested:c,onSignatureCancelled:i,onSignatureReceived:a}){e=Object.assign({sendTransaction:(n,e,c)=>__awaiter(this,void 0,void 0,function*(){let i;t(c[0]);try{i=yield n.bind(e)(...c)}catch(n){throw o(c[0]),n}return r(i),i}),signMessage:(n,e,t)=>__awaiter(this,void 0,void 0,function*(){let o;c(t[0]);try{o=yield n.bind(e)(...t)}catch(n){throw i(t[0]),n}return a(o),o})},e);const s={};return new Proxy(n,{get:(t,o)=>{const r=e[o];return r?function(e,t){let o=s[e];return o||(o=new Proxy(n[e],t),s[e]=o),o}(o,{apply:r}):t[o]}})}function r(n,e){return o(n,{connectUnchecked:(n,t,r)=>{return function(n,e){return o(n,{},e)}(n.bind(t)(...r),e)}},e)}e.proxyContract=function n(e,o,r){const c=r?Object.assign({onContractTxRequested:t.noop,onContractTxCancelled:t.noop,onContractTxSent:t.noop},r):{onContractTxRequested:t.noop,onContractTxCancelled:t.noop,onContractTxSent:t.noop},{onContractTxRequested:i,onContractTxCancelled:a,onContractTxSent:s}=c,u={},d=e.interface.functions,f={};for(const n of Object.keys(d))f[d[n].name]=n;const l={};for(const n of Object.keys(e))l[n]=e[n];l.functions={};for(const n of Object.keys(e.functions))l.functions[n]=e.functions[n];function p(n,t){let r=u[t];if(!r){let c=e.interface.functions[t];c||(c=e.interface.functions[f[t]]),r=new Proxy(n[t],{apply:(e,r,u)=>__awaiter(this,void 0,void 0,function*(){const r=u.length;let d,f,l;r===c.inputs.length+1&&"object"==typeof u[r-1]&&(d=u[r]),d&&(f=d.outcome,delete(d=Object.assign({},d)).outcome),i({name:o,method:t,overrides:d,outcome:f});try{l=yield e.bind(n)(...u)}catch(n){throw a({name:o,method:t,overrides:d,outcome:f}),n}return s({hash:l.hash,name:o,method:t,overrides:d,outcome:f}),l})}),u[t]=r}return r}const x=new Proxy(l.functions,{get:(n,t)=>p(e.functions,t)});return new Proxy(l,{get:(t,c)=>"functions"===c?x:e.functions[c]?p(e.functions,c):"_proxiedContract"===c?e:"connect"===c?t=>n(e.connect(t),o,r):"toJSON"===c?()=>({address:e.address,abi:e.interface.fragments,functionsSignatures:e.interface.fragments.map(n=>n.format("full"))}):t[c]})},e.proxyWeb3Provider=function(n,e){const o=e?Object.assign({onTxRequested:t.noop,onTxCancelled:t.noop,onTxSent:t.noop,onSignatureRequested:t.noop,onSignatureCancelled:t.noop,onSignatureReceived:t.noop},e):{onTxRequested:t.noop,onTxCancelled:t.noop,onTxSent:t.noop,onSignatureRequested:t.noop,onSignatureCancelled:t.noop,onSignatureReceived:t.noop},c=new Proxy(n.getSigner,{apply:(e,t,c)=>r(e.bind(n)(...c),o)});return new Proxy(n,{get:(n,e)=>"getSigner"===e?c:"signMessage"===e?c:"sendTransaction"===e?c:"connectUnchecked"===e?c:n[e]})}});