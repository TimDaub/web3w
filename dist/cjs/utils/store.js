"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=exports.writable=exports.readable=void 0;const internals_1=require("./internals");Object.defineProperty(exports,"get",{enumerable:!0,get:function(){return internals_1.get_store_value}});const subscriber_queue=[];function readable(e,r){return{subscribe:writable(e,r).subscribe}}function writable(e,r=internals_1.noop){let t=null;const n=[];function s(r){if(internals_1.safe_not_equal(e,r)&&(e=r,t)){const r=!subscriber_queue.length;for(let r=0;r<n.length;r+=1){const t=n[r];t[1](),subscriber_queue.push(t,e)}if(r){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}return{set:s,update:function(r){s(r(e))},subscribe:function(u,i=internals_1.noop){const l=[u,i];return n.push(l),1===n.length&&(t=r(s)||internals_1.noop),u(e),()=>{const e=n.indexOf(l);-1!==e&&n.splice(e,1),0===n.length&&null!==t&&(t(),t=null)}}}}exports.readable=readable,exports.writable=writable;